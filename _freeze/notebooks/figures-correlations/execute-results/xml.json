{
  "hash": "3a188c3370275526f0d81daf1abc08a6",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Code for Figures 3-4 based on Pearson's correlations\"\nauthor: \"Eduard Klapwijk\"\n---\n\n\n\n\nLoad libraries to produce figures:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# load libraries\nlibrary(dplyr)\nlibrary(patchwork)\n# load devtools library and load neuro-up package from github repo\nlibrary(devtools)\ninstall_github(\"eduardklap/neuroUp\")\nlibrary(neuroUp)\n```\n:::\n\n\n\n\nSet seed and create Figure 3A for the Feedback task DLPFC ROI:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# set seed\nset.seed(1234)\n\n# calculate difference mfg_learning vs. mfg_application\ndata_feedback <- feedback\ndata_feedback$dif <- data_feedback$mfg_learning - data_feedback$mfg_application\n\n# Estimate correlations\nFig3a <- estim_corr(data = data_feedback,\n                    vars_of_interest = c(\"dif\", \"age\"),\n                    sample_size = 20:271, \n                    k = 1000, \n                    name = \"A. Feedback DLPFC corr. with age\")\n```\n:::\n\n\n\n\nSet seed and create Figure 3B for the Gambling task NAcc ROI:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# set seed\nset.seed(1234)\n\n# Estimate correlations\nFig3b <- estim_corr(data = gambling, \n                    vars_of_interest = c(\"lnacc_self_winvsloss\", \n                                         \"age\"), \n                    sample_size = 20:221, \n                    k = 1000, \n                    name = \"B. Gambling NAcc corr. with age\")\n```\n:::\n\n\n\n\nSet seed and create Figure 3C for the Self-evaluations task mPFC ROI:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# set seed\nset.seed(1234)\n\n# calculate difference mpfc_self - mpfc_control\ndata_self <- self_eval\ndata_self$dif <- data_self$mpfc_self - data_self$mpfc_control\n\n# Estimate correlations\nFig3c <- estim_corr(data = data_self,\n                    vars_of_interest = c(\"dif\",\n                                         \"age\"),\n                    sample_size = 20:149, \n                    k = 1000, \n                    name = \"C. Self-evaluations mPFC corr. with age\")\n```\n:::\n\n\n\n\nSet seed and create Figure 3D for the Gaining for self task NAcc ROI:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# set seed\nset.seed(1234)\n\n# calculate difference nacc_selfgain vs. nacc_bothnogain\ndata_vicar <- vicar_char\ndata_vicar$dif <- data_vicar$nacc_selfgain - data_vicar$nacc_bothnogain\n\n# Estimate correlations\nFig3d <- estim_corr(data = data_vicar, \n                    vars_of_interest = c(\"diff\", \n                                         \"age\"),\n                    sample_size = 20:156, \n                    k = 1000, \n                    name = \"D. Gaining self left NAcc corr. with age\")\n```\n:::\n\n\n\n\nCombine figures 3A-D in one figure for Pearson's correlations:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nFig3a$fig_corr + Fig3b$fig_corr + Fig3c$fig_corr + Fig3d$fig_corr\n```\n:::\n\n\n\n\nCombine figures 4A-D in one figure for the proportion of intervals not containing the value 0:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nFig3a$fig_corr_nozero + Fig3b$fig_corr_nozero + Fig3c$fig_corr_nozero + Fig3d$fig_corr_nozero\n```\n:::\n\n\n\n\nExtract numbers to make table 3:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# first extract tibble from results (select mean only)\nfeedback <- as_tibble(Fig3a$tbl_select) %>%\n  dplyr::filter(permutation == \"Overall\")\ngambling <- as_tibble(Fig3b$tbl_select) %>%\n  dplyr::filter(permutation == \"Overall\")\nselfeval <- as_tibble(Fig3c$tbl_select) %>%\n  dplyr::filter(permutation == \"Overall\")\ngaining <- as_tibble(Fig3d$tbl_select) %>%\n  dplyr::filter(permutation == \"Overall\")\n\n# use numbers to make a table in text\n```\n:::\n",
    "supporting": [
      "figures-correlations_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}